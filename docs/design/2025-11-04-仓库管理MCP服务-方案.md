# ä»“åº“ç®¡ç†MCPæœåŠ¡ - æ–¹æ¡ˆè®¾è®¡æ–‡æ¡£

**æ–‡æ¡£ç‰ˆæœ¬**: v1.0
**åˆ›å»ºæ—¥æœŸ**: 2025-11-04
**ä½œè€…**: zzxxhh (Spring Frameworkæ¶æ„å¸ˆè§†è§’)
**å®¡æ‰¹çŠ¶æ€**: å¾…å®¡æ‰¹

---

## 1. éœ€æ±‚æ¦‚è¿°

### 1.1 ä¸šåŠ¡éœ€æ±‚
åœ¨ `scm-ai` æ¨¡å—çš„ `P00000025` åŒ…ä¸‹å»ºç«‹ä¸€å¥—å®Œæ•´çš„MCPï¼ˆModel Context Protocolï¼‰æœåŠ¡ï¼Œä¸ºAIå·¥ä½œæµæä¾›ä»“åº“ç®¡ç†çš„æŸ¥è¯¢èƒ½åŠ›ã€‚

### 1.2 æŠ€æœ¯è¾¹ç•Œ
- **ç›®æ ‡è¡¨**: m_warehouseï¼ˆä»“åº“ï¼‰ã€m_locationï¼ˆåº“åŒºï¼‰ã€m_binï¼ˆåº“ä½ï¼‰
- **æ“ä½œç±»å‹**: ä»…æŸ¥è¯¢æ“ä½œï¼ˆQuery Onlyï¼‰ï¼Œä¸æ¶‰åŠå¢åˆ æ”¹
- **åŸºç¡€è®¾æ–½**: å¤ç”¨ scm-core ç°æœ‰çš„ CRUD æœåŠ¡
- **é›†æˆæ¡†æ¶**: Spring AI MCP

### 1.3 ç›®æ ‡ç”¨æˆ·
- AI å·¥ä½œæµï¼ˆé€šè¿‡ MCP åè®®è°ƒç”¨ï¼‰
- ä»“åº“ç®¡ç†äººå‘˜ï¼ˆé€šè¿‡ AI å¯¹è¯æŸ¥è¯¢ä»“åº“ä¿¡æ¯ï¼‰
- å…¥åº“æ“ä½œå‘˜ï¼ˆé€šè¿‡ AI è¾…åŠ©æŸ¥æ‰¾å¯ç”¨åº“ä½ï¼‰
- åº“å­˜åˆ†æå¸ˆï¼ˆé€šè¿‡ AI ç”Ÿæˆä»“åº“ç»Ÿè®¡æŠ¥å‘Šï¼‰

---

## 2. KISSåŸåˆ™è¯„ä¼°

### 2.1 å››ä¸ªå…³é”®é—®é¢˜

**é—®é¢˜1: "è¿™æ˜¯ä¸ªçœŸé—®é¢˜è¿˜æ˜¯è‡†æƒ³å‡ºæ¥çš„ï¼Ÿ"**
- **ç­”æ¡ˆ**: âœ… çœŸå®é—®é¢˜
- **ç†ç”±**: AI å·¥ä½œæµéœ€è¦æŸ¥è¯¢ä»“åº“æ•°æ®æ¥æä¾›æ™ºèƒ½ä»“å‚¨å»ºè®®ï¼Œè¿™æ˜¯å®é™…ä¸šåŠ¡åœºæ™¯

**é—®é¢˜2: "æœ‰æ›´ç®€å•çš„æ–¹æ³•å—ï¼Ÿ"**
- **ç­”æ¡ˆ**: âœ… å½“å‰æ–¹æ¡ˆå·²æ˜¯æœ€ç®€
- **ç†ç”±**:
  - å¤ç”¨ç°æœ‰ scm-core æœåŠ¡ï¼Œä¸é‡å¤å¼€å‘
  - åªåšæŸ¥è¯¢åŒ…è£…ï¼Œä¸å¼•å…¥æ–°çš„ä¸šåŠ¡é€»è¾‘
  - éµå¾ªç°æœ‰ BinAiService/LocationAiService æ¨¡å¼

**é—®é¢˜3: "ä¼šç ´åä»€ä¹ˆå—ï¼Ÿ"**
- **ç­”æ¡ˆ**: âœ… é›¶ç ´å
- **ç†ç”±**:
  - æ–°å¢æ¨¡å—ï¼Œä¸ä¿®æ”¹ç°æœ‰ä»£ç 
  - åªè¯»æ“ä½œï¼Œä¸å½±å“æ•°æ®å®Œæ•´æ€§
  - ç‹¬ç«‹åŒ…ç»“æ„ï¼Œå®Œå…¨éš”ç¦»

**é—®é¢˜4: "å½“å‰é¡¹ç›®çœŸçš„éœ€è¦è¿™ä¸ªåŠŸèƒ½å—ï¼Ÿ"**
- **ç­”æ¡ˆ**: âœ… ç¡®å®éœ€è¦
- **ç†ç”±**:
  - å®Œå–„ AI å·¥ä½œæµçš„åŸºç¡€æ•°æ®èƒ½åŠ›
  - ä¸ç°æœ‰ BinAiService/LocationAiService å½¢æˆå®Œæ•´ä¸‰å±‚æŸ¥è¯¢ä½“ç³»
  - ä¸ºæ™ºèƒ½ä»“å‚¨ç®¡ç†æä¾›æ•°æ®æ”¯æ’‘

### 2.2 ç»“è®º
é€šè¿‡ KISS åŸåˆ™è¯„ä¼°ï¼Œè¯¥éœ€æ±‚å€¼å¾—å®æ–½ï¼Œæ–¹æ¡ˆè®¾è®¡åˆç†ã€‚

---

## 3. Linuså¼5å±‚é—®é¢˜åˆ†è§£

### ç¬¬ä¸€å±‚ï¼šæ•°æ®ç»“æ„åˆ†æ
**"Bad programmers worry about the code. Good programmers worry about data structures."**

- **æ ¸å¿ƒæ•°æ®å…³ç³»**: ä¸‰å±‚æ ‘çŠ¶ç»“æ„
  ```
  m_warehouse (ä»“åº“)
    â”œâ”€ 1:N â†’ m_location (åº“åŒº)
         â””â”€ 1:N â†’ m_bin (åº“ä½)
  ```
- **æ•°æ®æ‹¥æœ‰æƒ**:
  - m_warehouse æ˜¯é¡¶å±‚å®ä½“ï¼Œç‹¬ç«‹å­˜åœ¨
  - m_location é€šè¿‡ warehouse_id å½’å±ä»“åº“
  - m_bin é€šè¿‡ warehouse_id + location_id å½’å±åº“åŒº
- **æ•°æ®æµå‘**: è‡ªé¡¶å‘ä¸‹æŸ¥è¯¢ï¼ˆwarehouse â†’ location â†’ binï¼‰
- **ä¸å¿…è¦çš„æ•°æ®å¤åˆ¶/è½¬æ¢**: âŒ æ— ï¼Œç›´æ¥è¿”å› VO å¯¹è±¡

### ç¬¬äºŒå±‚ï¼šç‰¹æ®Šæƒ…å†µè¯†åˆ«
**"å¥½ä»£ç æ²¡æœ‰ç‰¹æ®Šæƒ…å†µ"**

- **åˆ†æ”¯åˆ†æ**:
  - âœ… æ— ç‰¹æ®Š if/else åˆ†æ”¯éœ€è¦æ¶ˆé™¤
  - âœ… æŸ¥è¯¢æ¡ä»¶ä¸ºç©º = ä¸šåŠ¡å¼‚å¸¸ï¼ˆåº”è¿”å›é”™è¯¯ï¼‰ï¼Œä¸æ˜¯ç‰¹æ®Šæƒ…å†µ
  - âœ… æŸ¥è¯¢ç»“æœä¸ºç©º = æ­£å¸¸æƒ…å†µï¼ˆè¿”å›ç©ºåˆ—è¡¨ï¼‰

- **è¾¹ç•Œæƒ…å†µå¤„ç†**:
  - æ‰€æœ‰ç©ºå€¼æ£€æŸ¥é€šè¿‡æ ‡å‡† `if (param != null)` å¤„ç†
  - å¼‚å¸¸ç»Ÿä¸€ try-catch åŒ…è£…ï¼Œè¿”å› Map<String, Object> æ ‡å‡†é”™è¯¯æ ¼å¼

### ç¬¬ä¸‰å±‚ï¼šå¤æ‚åº¦å®¡æŸ¥
**"å¦‚æœå®ç°éœ€è¦è¶…è¿‡3å±‚ç¼©è¿›ï¼Œé‡æ–°è®¾è®¡å®ƒ"**

- **åŠŸèƒ½æœ¬è´¨**ï¼ˆä¸€å¥è¯ï¼‰: "ä¸º AI æä¾›ä¸‰å±‚ä»“åº“ä¸»æ•°æ®çš„åªè¯»æŸ¥è¯¢æ¥å£"
- **ä½¿ç”¨çš„æ¦‚å¿µæ•°é‡**: 3ä¸ª
  1. MCP å·¥å…·ï¼ˆ@McpToolï¼‰
  2. Service å±‚åŒ…è£…ï¼ˆWarehouseAiServiceï¼‰
  3. ä¸‰ç§æŸ¥è¯¢ç±»å‹ï¼ˆåˆ—è¡¨/è¯¦æƒ…/æ¡ä»¶æŸ¥è¯¢ï¼‰
- **èƒ½å¦ç®€åŒ–**: âŒ å·²ç»æœ€ç®€ï¼Œæ— æ³•å†å‡å°‘

### ç¬¬å››å±‚ï¼šç ´åæ€§åˆ†æ
**"Never break userspace" - å‘åå…¼å®¹æ˜¯é“å¾‹**

- **å½±å“èŒƒå›´**: é›¶å½±å“
  - æ–°å¢æ¨¡å—åœ¨ `P00000025` åŒ…ä¸‹
  - ä¸ä¿®æ”¹ä»»ä½•ç°æœ‰æ¥å£
  - ä¸æ”¹å˜ç°æœ‰æœåŠ¡è¡Œä¸º

- **ä¾èµ–ç ´å**: æ— 
  - ä»…ä¾èµ– scm-core çš„ç¨³å®šæŸ¥è¯¢æ¥å£
  - IMWarehouseService å·²å­˜åœ¨ä¸”ç¨³å®š

- **å‘åå…¼å®¹æ€§**: 100% å…¼å®¹

### ç¬¬äº”å±‚ï¼šå®ç”¨æ€§éªŒè¯
**"Theory and practice sometimes clash. Theory loses. Every single time."**

- **ç”Ÿäº§ç¯å¢ƒçœŸå®æ€§**: âœ… çœŸå®å­˜åœ¨
  - ä»“åº“ç®¡ç†å‘˜éœ€è¦å¿«é€ŸæŸ¥è¯¢åº“ä½ä¿¡æ¯
  - å…¥åº“æ“ä½œå‘˜éœ€è¦æ‰¾åˆ°å¯ç”¨åº“ä½
  - åº“å­˜åˆ†æå¸ˆéœ€è¦ç”Ÿæˆç»Ÿè®¡æŠ¥å‘Š

- **ç”¨æˆ·è§„æ¨¡**: ä¸­ç­‰è§„æ¨¡
  - ä»“åº“ç®¡ç†äººå‘˜ï¼šæ¯ä¸ªç§Ÿæˆ· 5-20 äºº
  - AI å·¥ä½œæµè°ƒç”¨é¢‘ç‡ï¼šé¢„è®¡ 100-500 æ¬¡/å¤©/ç§Ÿæˆ·

- **å¤æ‚åº¦ä¸é—®é¢˜ä¸¥é‡æ€§åŒ¹é…**: âœ… åŒ¹é…
  - ç®€å•åŒ…è£…å±‚ï¼Œå¼€å‘æˆæœ¬ä½
  - æä¾›æ ¸å¿ƒæŸ¥è¯¢èƒ½åŠ›ï¼Œä¸šåŠ¡ä»·å€¼é«˜

---

## 4. æ¶æ„è®¾è®¡

### 4.1 æ€»ä½“æ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         AI å·¥ä½œæµ / ç”¨æˆ·å¯¹è¯            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                   â”‚ MCP Protocol
                   â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚        Spring AI MCP Layer              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚  @McpTool Annotations          â”‚    â”‚
â”‚  â”‚  - WarehouseMcpTools           â”‚    â”‚
â”‚  â”‚  - LocationMcpTools            â”‚    â”‚
â”‚  â”‚  - BinMcpTools                 â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â”‚ Spring Bean Injection
                     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         AI Service Layer                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚  Business Logic Wrapper        â”‚    â”‚
â”‚  â”‚  - WarehouseAiService          â”‚    â”‚
â”‚  â”‚  - LocationAiService (exists)  â”‚    â”‚
â”‚  â”‚  - BinAiService (exists)       â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â”‚ @Autowired
                     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         scm-core Service Layer          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚  Core CRUD Services            â”‚    â”‚
â”‚  â”‚  - IMWarehouseService          â”‚    â”‚
â”‚  â”‚  - IMLocationService           â”‚    â”‚
â”‚  â”‚  - IMBinService                â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â”‚ MyBatis Plus
                     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         MySQL Database                  â”‚
â”‚  - m_warehouse                          â”‚
â”‚  - m_location                           â”‚
â”‚  - m_bin                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 4.2 æ¨¡å—èŒè´£

| æ¨¡å— | èŒè´£ | ä½ç½® |
|------|------|------|
| **WarehouseMcpTools** | MCP å·¥å…·å®šä¹‰ï¼Œ@McpTool æ³¨è§£å£°æ˜ | P00000025/tools/ |
| **LocationMcpTools** | MCP å·¥å…·å®šä¹‰ï¼Œ@McpTool æ³¨è§£å£°æ˜ | P00000025/tools/ |
| **BinMcpTools** | MCP å·¥å…·å®šä¹‰ï¼Œ@McpTool æ³¨è§£å£°æ˜ | P00000025/tools/ |
| **WarehouseAiService** | ä¸šåŠ¡é€»è¾‘åŒ…è£…ï¼Œè¿”å› AI å‹å¥½æ ¼å¼ | P00000025/service/ |
| **LocationAiService** | å·²å­˜åœ¨ï¼Œæ— éœ€ä¿®æ”¹ | P00000025/service/ |
| **BinAiService** | å·²å­˜åœ¨ï¼Œæ— éœ€ä¿®æ”¹ | P00000025/service/ |
| **IMWarehouseService** | scm-core æ ¸å¿ƒæœåŠ¡ï¼Œå·²å­˜åœ¨ | scm-core |

### 4.3 è®¾è®¡æ¨¡å¼

- **Facade æ¨¡å¼**: AiService å±‚ä½œä¸º Facadeï¼Œéšè— scm-core çš„å¤æ‚æ€§
- **Adapter æ¨¡å¼**: å°† scm-core çš„è¿”å›æ ¼å¼é€‚é…ä¸º AI å‹å¥½çš„ Map<String, Object> æ ¼å¼
- **Template Method æ¨¡å¼**: æ‰€æœ‰ AiService æ–¹æ³•éµå¾ªç»Ÿä¸€æ¨¡æ¿ï¼š
  ```java
  try {
      1. å‚æ•°æ ¡éªŒ
      2. è°ƒç”¨ scm-core æœåŠ¡
      3. ç»“æœåŒ…è£…
      4. è¿”å›æˆåŠŸå“åº”
  } catch (Exception e) {
      è¿”å›é”™è¯¯å“åº”
  }
  ```

---

## 5. æ–‡ä»¶æ¸…å•

### 5.1 éœ€è¦åˆ›å»ºçš„æ–‡ä»¶

| æ–‡ä»¶è·¯å¾„ | æ–‡ä»¶ç±»å‹ | è¡Œæ•°é¢„ä¼° | èŒè´£æè¿° |
|---------|---------|---------|---------|
| `P00000025/service/WarehouseAiService.java` | Service | 400-500 | ä»“åº“æŸ¥è¯¢ä¸šåŠ¡é€»è¾‘åŒ…è£… |
| `P00000025/tools/WarehouseMcpTools.java` | MCP Tools | 80-120 | ä»“åº“MCPå·¥å…·å®šä¹‰ |
| `P00000025/tools/LocationMcpTools.java` | MCP Tools | 80-120 | åº“åŒºMCPå·¥å…·å®šä¹‰ |
| `P00000025/tools/BinMcpTools.java` | MCP Tools | 80-120 | åº“ä½MCPå·¥å…·å®šä¹‰ |

### 5.2 éœ€è¦ä¿®æ”¹çš„æ–‡ä»¶

| æ–‡ä»¶è·¯å¾„ | ä¿®æ”¹ç±»å‹ | ä¿®æ”¹å†…å®¹ |
|---------|---------|---------|
| `scm-start/src/main/resources/application.yml` | é…ç½®æ·»åŠ  | æ·»åŠ  Spring AI MCP é…ç½® |

### 5.3 å‚è€ƒçš„ç°æœ‰æ–‡ä»¶ï¼ˆä¸ä¿®æ”¹ï¼‰

- `P00000025/service/BinAiService.java` - å®ç°æ¨¡å¼å‚è€ƒ
- `P00000025/service/LocationAiService.java` - å®ç°æ¨¡å¼å‚è€ƒ
- `scm-core/.../IMWarehouseService.java` - æœåŠ¡æ¥å£å‚è€ƒ
- `scm-core/.../IMLocationService.java` - æœåŠ¡æ¥å£å‚è€ƒ
- `scm-core/.../IMBinService.java` - æœåŠ¡æ¥å£å‚è€ƒ

---

## 6. è¯¦ç»†è®¾è®¡

### 6.1 WarehouseAiService è¯¦ç»†è®¾è®¡

#### 6.1.1 ç±»ç»“æ„

```java
package com.xinyirun.scm.ai.mcp.P00000025.service;

import com.xinyirun.scm.core.system.service.master.warehouse.IMWarehouseService;
import com.xinyirun.scm.bean.vo.MWarehouseVo;
import lombok.extern.slf4j.Slf4j;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.stereotype.Service;

import java.util.*;

/**
 * ä»“åº“AIæœåŠ¡
 * ä¸ºAIå·¥ä½œæµæä¾›ä»“åº“ä¸»æ•°æ®æŸ¥è¯¢èƒ½åŠ›
 *
 * @author zzxxhh
 * @since 2025-11-04
 */
@Slf4j
@Service
public class WarehouseAiService {

    @Autowired
    private IMWarehouseService warehouseService;

    // æ–¹æ³•åˆ—è¡¨è§ 6.1.2
}
```

#### 6.1.2 æ ¸å¿ƒæ–¹æ³•è®¾è®¡

**æ–¹æ³•1: queryWarehouses - æŸ¥è¯¢ä»“åº“åˆ—è¡¨**
```java
/**
 * æŸ¥è¯¢ä»“åº“åˆ—è¡¨
 *
 * @param code ä»“åº“ç¼–ç ï¼ˆå¯é€‰ï¼Œæ¨¡ç³ŠåŒ¹é…ï¼‰
 * @param name ä»“åº“åç§°ï¼ˆå¯é€‰ï¼Œæ¨¡ç³ŠåŒ¹é…ï¼‰
 * @param shortName ä»“åº“ç®€ç§°ï¼ˆå¯é€‰ï¼Œæ¨¡ç³ŠåŒ¹é…ï¼‰
 * @param province çœä»½ï¼ˆå¯é€‰ï¼‰
 * @param city åŸå¸‚ï¼ˆå¯é€‰ï¼‰
 * @param warehouseType ä»“åº“ç±»å‹ï¼ˆå¯é€‰ï¼Œå¦‚ï¼šè‡ªæœ‰ä»“åº“ã€ç¬¬ä¸‰æ–¹ä»“åº“ï¼‰
 * @param enableLocation æ˜¯å¦å¯ç”¨åº“åŒºï¼ˆå¯é€‰ï¼Œtrue/falseï¼‰
 * @param enableBin æ˜¯å¦å¯ç”¨åº“ä½ï¼ˆå¯é€‰ï¼Œtrue/falseï¼‰
 * @param enable å¯ç”¨çŠ¶æ€ï¼ˆå¯é€‰ï¼Œtrue=å¯ç”¨ï¼Œfalse=åœç”¨ï¼‰
 * @return Map<String, Object> åŒ…å« success, message, total, warehouses, summary
 */
public Map<String, Object> queryWarehouses(
    String code, String name, String shortName,
    String province, String city, String warehouseType,
    Boolean enableLocation, Boolean enableBin, Boolean enable
)
```

**è¿”å›æ ¼å¼**:
```json
{
    "success": true,
    "message": "ä»“åº“æŸ¥è¯¢æˆåŠŸ",
    "total": 10,
    "warehouses": [
        {
            "id": 1,
            "code": "WH001",
            "name": "ä¸Šæµ·æ€»ä»“",
            "short_name": "æ²ªä»“",
            "province": "ä¸Šæµ·å¸‚",
            "city": "æµ¦ä¸œæ–°åŒº",
            "address": "å¼ æ±Ÿé«˜ç§‘æŠ€å›­åŒºXXXå·",
            "warehouse_type": "è‡ªæœ‰ä»“åº“",
            "enable_location": true,
            "enable_bin": true,
            "warehouse_capacity": 10000.00,
            "area": 5000.00,
            "enable": true
            // ... å…¶ä»–å­—æ®µ
        }
    ],
    "summary": {
        "total_count": 10,
        "enabled_count": 8,
        "disabled_count": 2,
        "total_capacity": 50000.00,
        "total_area": 25000.00,
        "warehouse_types": {
            "è‡ªæœ‰ä»“åº“": 6,
            "ç¬¬ä¸‰æ–¹ä»“åº“": 4
        },
        "province_distribution": {
            "ä¸Šæµ·å¸‚": 3,
            "æ±Ÿè‹çœ": 4,
            "æµ™æ±Ÿçœ": 3
        }
    }
}
```

**æ–¹æ³•2: getWarehouseDetail - è·å–ä»“åº“è¯¦æƒ…**
```java
/**
 * è·å–ä»“åº“è¯¦ç»†ä¿¡æ¯
 *
 * @param warehouseId ä»“åº“IDï¼ˆå¿…å¡«ï¼‰
 * @return Map<String, Object> åŒ…å« success, message, warehouse, related_info
 */
public Map<String, Object> getWarehouseDetail(Integer warehouseId)
```

**è¿”å›æ ¼å¼**:
```json
{
    "success": true,
    "message": "ä»“åº“è¯¦æƒ…è·å–æˆåŠŸ",
    "warehouse": {
        "id": 1,
        "code": "WH001",
        "name": "ä¸Šæµ·æ€»ä»“",
        // ... å®Œæ•´å­—æ®µ
    },
    "related_info": {
        "location_count": 12,
        "bin_count": 360,
        "enabled_location_count": 10,
        "enabled_bin_count": 300,
        "bin_utilization_rate": 75.5  // åº“ä½åˆ©ç”¨ç‡
    }
}
```

**æ–¹æ³•3: findWarehouseByCode - æŒ‰ç¼–ç æŸ¥æ‰¾ä»“åº“**
```java
/**
 * æŒ‰ä»“åº“ç¼–ç ç²¾ç¡®æŸ¥æ‰¾
 *
 * @param code ä»“åº“ç¼–ç ï¼ˆå¿…å¡«ï¼‰
 * @return Map<String, Object> åŒ…å« success, message, warehouse
 */
public Map<String, Object> findWarehouseByCode(String code)
```

**æ–¹æ³•4: findWarehousesByName - æŒ‰åç§°æŸ¥æ‰¾ä»“åº“**
```java
/**
 * æŒ‰ä»“åº“åç§°æ¨¡ç³ŠæŸ¥æ‰¾
 *
 * @param name ä»“åº“åç§°å…³é”®è¯ï¼ˆå¿…å¡«ï¼‰
 * @return Map<String, Object> åŒ…å« success, message, warehouses
 */
public Map<String, Object> findWarehousesByName(String name)
```

**æ–¹æ³•5: getEnabledWarehouses - è·å–æ‰€æœ‰å¯ç”¨çš„ä»“åº“**
```java
/**
 * è·å–æ‰€æœ‰å¯ç”¨çŠ¶æ€çš„ä»“åº“
 *
 * @return Map<String, Object> åŒ…å« success, message, warehouses
 */
public Map<String, Object> getEnabledWarehouses()
```

**æ–¹æ³•6: getWarehousesByType - æŒ‰ç±»å‹æŸ¥è¯¢ä»“åº“**
```java
/**
 * æŒ‰ä»“åº“ç±»å‹æŸ¥è¯¢
 *
 * @param warehouseType ä»“åº“ç±»å‹ï¼ˆå¿…å¡«ï¼Œå¦‚ï¼šè‡ªæœ‰ä»“åº“ã€ç¬¬ä¸‰æ–¹ä»“åº“ï¼‰
 * @return Map<String, Object> åŒ…å« success, message, warehouses
 */
public Map<String, Object> getWarehousesByType(String warehouseType)
```

**æ–¹æ³•7: getWarehousesByProvince - æŒ‰çœä»½æŸ¥è¯¢ä»“åº“**
```java
/**
 * æŒ‰çœä»½æŸ¥è¯¢ä»“åº“
 *
 * @param province çœä»½åç§°ï¼ˆå¿…å¡«ï¼‰
 * @return Map<String, Object> åŒ…å« success, message, warehouses
 */
public Map<String, Object> getWarehousesByProvince(String province)
```

**æ–¹æ³•8: getWarehousesByCity - æŒ‰åŸå¸‚æŸ¥è¯¢ä»“åº“**
```java
/**
 * æŒ‰åŸå¸‚æŸ¥è¯¢ä»“åº“
 *
 * @param city åŸå¸‚åç§°ï¼ˆå¿…å¡«ï¼‰
 * @return Map<String, Object> åŒ…å« success, message, warehouses
 */
public Map<String, Object> getWarehousesByCity(String city)
```

#### 6.1.3 è¾…åŠ©æ–¹æ³•è®¾è®¡

**è¾…åŠ©æ–¹æ³•1: calculateWarehouseSummary**
```java
/**
 * è®¡ç®—ä»“åº“ç»Ÿè®¡æ‘˜è¦
 *
 * @param warehouses ä»“åº“åˆ—è¡¨
 * @return Map<String, Object> ç»Ÿè®¡ä¿¡æ¯
 */
private Map<String, Object> calculateWarehouseSummary(List<MWarehouseVo> warehouses)
```

**è¾…åŠ©æ–¹æ³•2: buildWarehouseStatusDescription**
```java
/**
 * æ„å»ºä»“åº“çŠ¶æ€æè¿°ï¼ˆç”¨äºAIç†è§£ï¼‰
 *
 * @param warehouse ä»“åº“å¯¹è±¡
 * @return String çŠ¶æ€æè¿°æ–‡æœ¬
 */
private String buildWarehouseStatusDescription(MWarehouseVo warehouse)
```

---

### 6.2 WarehouseMcpTools è¯¦ç»†è®¾è®¡

#### 6.2.1 ç±»ç»“æ„

```java
package com.xinyirun.scm.ai.mcp.P00000025.tools;

import com.xinyirun.scm.ai.mcp.P00000025.service.WarehouseAiService;
import org.springframework.ai.mcp.spring.McpTool;
import org.springframework.ai.mcp.spring.McpToolParam;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.stereotype.Component;

import java.util.Map;

/**
 * ä»“åº“ç®¡ç†MCPå·¥å…·
 * ä¸ºAIæä¾›ä»“åº“æŸ¥è¯¢èƒ½åŠ›
 *
 * @author zzxxhh
 * @since 2025-11-04
 */
@Component
public class WarehouseMcpTools {

    @Autowired
    private WarehouseAiService warehouseAiService;

    // MCP å·¥å…·æ–¹æ³•è§ 6.2.2
}
```

#### 6.2.2 MCP å·¥å…·å®šä¹‰

**å·¥å…·1: query_warehouses**
```java
@McpTool(
    name = "query_warehouses",
    description = "æŸ¥è¯¢ä»“åº“åˆ—è¡¨ã€‚æ”¯æŒæŒ‰ç¼–ç ã€åç§°ã€åœ°å€ã€ç±»å‹ç­‰å¤šæ¡ä»¶æŸ¥è¯¢ã€‚è¿”å›ä»“åº“åŸºæœ¬ä¿¡æ¯å’Œç»Ÿè®¡æ‘˜è¦ã€‚"
)
public Map<String, Object> queryWarehouses(
    @McpToolParam(
        name = "code",
        description = "ä»“åº“ç¼–ç ï¼ˆå¯é€‰ï¼‰ï¼Œæ”¯æŒæ¨¡ç³ŠåŒ¹é…"
    ) String code,

    @McpToolParam(
        name = "name",
        description = "ä»“åº“åç§°ï¼ˆå¯é€‰ï¼‰ï¼Œæ”¯æŒæ¨¡ç³ŠåŒ¹é…"
    ) String name,

    @McpToolParam(
        name = "shortName",
        description = "ä»“åº“ç®€ç§°ï¼ˆå¯é€‰ï¼‰ï¼Œæ”¯æŒæ¨¡ç³ŠåŒ¹é…"
    ) String shortName,

    @McpToolParam(
        name = "province",
        description = "çœä»½ï¼ˆå¯é€‰ï¼‰ï¼Œå¦‚ï¼šä¸Šæµ·å¸‚ã€æ±Ÿè‹çœ"
    ) String province,

    @McpToolParam(
        name = "city",
        description = "åŸå¸‚ï¼ˆå¯é€‰ï¼‰ï¼Œå¦‚ï¼šæµ¦ä¸œæ–°åŒºã€è‹å·å¸‚"
    ) String city,

    @McpToolParam(
        name = "warehouseType",
        description = "ä»“åº“ç±»å‹ï¼ˆå¯é€‰ï¼‰ï¼Œå¦‚ï¼šè‡ªæœ‰ä»“åº“ã€ç¬¬ä¸‰æ–¹ä»“åº“"
    ) String warehouseType,

    @McpToolParam(
        name = "enableLocation",
        description = "æ˜¯å¦å¯ç”¨åº“åŒºï¼ˆå¯é€‰ï¼‰ï¼Œtrue=å¯ç”¨ï¼Œfalse=æœªå¯ç”¨"
    ) Boolean enableLocation,

    @McpToolParam(
        name = "enableBin",
        description = "æ˜¯å¦å¯ç”¨åº“ä½ï¼ˆå¯é€‰ï¼‰ï¼Œtrue=å¯ç”¨ï¼Œfalse=æœªå¯ç”¨"
    ) Boolean enableBin,

    @McpToolParam(
        name = "enable",
        description = "å¯ç”¨çŠ¶æ€ï¼ˆå¯é€‰ï¼‰ï¼Œtrue=å¯ç”¨ï¼Œfalse=åœç”¨"
    ) Boolean enable
) {
    return warehouseAiService.queryWarehouses(
        code, name, shortName, province, city,
        warehouseType, enableLocation, enableBin, enable
    );
}
```

**å·¥å…·2: get_warehouse_detail**
```java
@McpTool(
    name = "get_warehouse_detail",
    description = "è·å–ä»“åº“è¯¦ç»†ä¿¡æ¯ï¼ŒåŒ…æ‹¬åŸºæœ¬ä¿¡æ¯å’Œå…³è”çš„åº“åŒºã€åº“ä½ç»Ÿè®¡æ•°æ®ã€‚"
)
public Map<String, Object> getWarehouseDetail(
    @McpToolParam(
        name = "warehouseId",
        description = "ä»“åº“IDï¼ˆå¿…å¡«ï¼‰",
        required = true
    ) Integer warehouseId
) {
    return warehouseAiService.getWarehouseDetail(warehouseId);
}
```

**å·¥å…·3: find_warehouse_by_code**
```java
@McpTool(
    name = "find_warehouse_by_code",
    description = "æŒ‰ä»“åº“ç¼–ç ç²¾ç¡®æŸ¥æ‰¾ä»“åº“ã€‚ç”¨äºå¿«é€Ÿå®šä½ç‰¹å®šä»“åº“ã€‚"
)
public Map<String, Object> findWarehouseByCode(
    @McpToolParam(
        name = "code",
        description = "ä»“åº“ç¼–ç ï¼ˆå¿…å¡«ï¼‰ï¼Œç²¾ç¡®åŒ¹é…",
        required = true
    ) String code
) {
    return warehouseAiService.findWarehouseByCode(code);
}
```

**å·¥å…·4: get_enabled_warehouses**
```java
@McpTool(
    name = "get_enabled_warehouses",
    description = "è·å–æ‰€æœ‰å¯ç”¨çŠ¶æ€çš„ä»“åº“åˆ—è¡¨ã€‚ç”¨äºè·å–å½“å‰å¯ç”¨çš„ä»“åº“ã€‚"
)
public Map<String, Object> getEnabledWarehouses() {
    return warehouseAiService.getEnabledWarehouses();
}
```

---

### 6.3 LocationMcpTools è¯¦ç»†è®¾è®¡

#### 6.3.1 ç±»ç»“æ„

```java
package com.xinyirun.scm.ai.mcp.P00000025.tools;

import com.xinyirun.scm.ai.mcp.P00000025.service.LocationAiService;
import org.springframework.ai.mcp.spring.McpTool;
import org.springframework.ai.mcp.spring.McpToolParam;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.stereotype.Component;

import java.util.Map;

/**
 * åº“åŒºç®¡ç†MCPå·¥å…·
 * ä¸ºAIæä¾›åº“åŒºæŸ¥è¯¢èƒ½åŠ›
 *
 * @author zzxxhh
 * @since 2025-11-04
 */
@Component
public class LocationMcpTools {

    @Autowired
    private LocationAiService locationAiService;

    // MCP å·¥å…·æ–¹æ³•è§ 6.3.2
}
```

#### 6.3.2 MCP å·¥å…·å®šä¹‰

**å·¥å…·1: query_locations**
```java
@McpTool(
    name = "query_locations",
    description = "æŸ¥è¯¢åº“åŒºåˆ—è¡¨ã€‚æ”¯æŒæŒ‰ä»“åº“ã€ç¼–ç ã€åç§°ç­‰æ¡ä»¶æŸ¥è¯¢ã€‚è¿”å›åº“åŒºä¿¡æ¯å’Œç»Ÿè®¡æ‘˜è¦ã€‚"
)
public Map<String, Object> queryLocations(
    @McpToolParam(
        name = "warehouseId",
        description = "ä»“åº“IDï¼ˆå¯é€‰ï¼‰ï¼Œç”¨äºæŸ¥è¯¢æŒ‡å®šä»“åº“çš„åº“åŒº"
    ) Integer warehouseId,

    @McpToolParam(
        name = "code",
        description = "åº“åŒºç¼–ç ï¼ˆå¯é€‰ï¼‰ï¼Œæ”¯æŒæ¨¡ç³ŠåŒ¹é…"
    ) String code,

    @McpToolParam(
        name = "name",
        description = "åº“åŒºåç§°ï¼ˆå¯é€‰ï¼‰ï¼Œæ”¯æŒæ¨¡ç³ŠåŒ¹é…"
    ) String name,

    @McpToolParam(
        name = "enable",
        description = "å¯ç”¨çŠ¶æ€ï¼ˆå¯é€‰ï¼‰ï¼Œtrue=å¯ç”¨ï¼Œfalse=åœç”¨"
    ) Boolean enable,

    @McpToolParam(
        name = "isDefault",
        description = "æ˜¯å¦é»˜è®¤åº“åŒºï¼ˆå¯é€‰ï¼‰ï¼Œtrue=é»˜è®¤ï¼Œfalse=éé»˜è®¤"
    ) Boolean isDefault,

    @McpToolParam(
        name = "inventory",
        description = "åº“å­˜é”å®šçŠ¶æ€ï¼ˆå¯é€‰ï¼‰ï¼Œ'1'=é”å®šï¼Œ'0'=æœªé”å®š"
    ) String inventory
) {
    return locationAiService.queryLocations(
        warehouseId, code, name, enable, isDefault, inventory
    );
}
```

**å·¥å…·2: get_location_detail**
```java
@McpTool(
    name = "get_location_detail",
    description = "è·å–åº“åŒºè¯¦ç»†ä¿¡æ¯ï¼ŒåŒ…æ‹¬åŸºæœ¬ä¿¡æ¯å’Œå…³è”çš„åº“ä½ç»Ÿè®¡æ•°æ®ã€‚"
)
public Map<String, Object> getLocationDetail(
    @McpToolParam(
        name = "locationId",
        description = "åº“åŒºIDï¼ˆå¿…å¡«ï¼‰",
        required = true
    ) Integer locationId
) {
    return locationAiService.getLocationDetail(locationId);
}
```

**å·¥å…·3: query_locations_by_warehouse**
```java
@McpTool(
    name = "query_locations_by_warehouse",
    description = "æŸ¥è¯¢æŒ‡å®šä»“åº“ä¸‹çš„æ‰€æœ‰åº“åŒºã€‚ç”¨äºæŸ¥çœ‹æŸä¸ªä»“åº“çš„åº“åŒºå¸ƒå±€ã€‚"
)
public Map<String, Object> queryLocationsByWarehouse(
    @McpToolParam(
        name = "warehouseId",
        description = "ä»“åº“IDï¼ˆå¿…å¡«ï¼‰",
        required = true
    ) Integer warehouseId
) {
    return locationAiService.queryLocationsByWarehouse(warehouseId);
}
```

**å·¥å…·4: find_location_by_code**
```java
@McpTool(
    name = "find_location_by_code",
    description = "æŒ‰åº“åŒºç¼–ç ç²¾ç¡®æŸ¥æ‰¾åº“åŒºã€‚ç”¨äºå¿«é€Ÿå®šä½ç‰¹å®šåº“åŒºã€‚"
)
public Map<String, Object> findLocationByCode(
    @McpToolParam(
        name = "code",
        description = "åº“åŒºç¼–ç ï¼ˆå¿…å¡«ï¼‰ï¼Œç²¾ç¡®åŒ¹é…",
        required = true
    ) String code
) {
    return locationAiService.findLocationByCode(code);
}
```

---

### 6.4 BinMcpTools è¯¦ç»†è®¾è®¡

#### 6.4.1 ç±»ç»“æ„

```java
package com.xinyirun.scm.ai.mcp.P00000025.tools;

import com.xinyirun.scm.ai.mcp.P00000025.service.BinAiService;
import org.springframework.ai.mcp.spring.McpTool;
import org.springframework.ai.mcp.spring.McpToolParam;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.stereotype.Component;

import java.util.Map;

/**
 * åº“ä½ç®¡ç†MCPå·¥å…·
 * ä¸ºAIæä¾›åº“ä½æŸ¥è¯¢èƒ½åŠ›
 *
 * @author zzxxhh
 * @since 2025-11-04
 */
@Component
public class BinMcpTools {

    @Autowired
    private BinAiService binAiService;

    // MCP å·¥å…·æ–¹æ³•è§ 6.4.2
}
```

#### 6.4.2 MCP å·¥å…·å®šä¹‰

**å·¥å…·1: query_bins**
```java
@McpTool(
    name = "query_bins",
    description = "æŸ¥è¯¢åº“ä½åˆ—è¡¨ã€‚æ”¯æŒæŒ‰ä»“åº“ã€åº“åŒºã€ç¼–ç ã€è´§å“çŠ¶æ€ç­‰å¤šæ¡ä»¶æŸ¥è¯¢ã€‚è¿”å›åº“ä½ä¿¡æ¯å’Œç»Ÿè®¡æ‘˜è¦ã€‚"
)
public Map<String, Object> queryBins(
    @McpToolParam(
        name = "warehouseId",
        description = "ä»“åº“IDï¼ˆå¯é€‰ï¼‰ï¼Œç”¨äºæŸ¥è¯¢æŒ‡å®šä»“åº“çš„åº“ä½"
    ) Integer warehouseId,

    @McpToolParam(
        name = "locationId",
        description = "åº“åŒºIDï¼ˆå¯é€‰ï¼‰ï¼Œç”¨äºæŸ¥è¯¢æŒ‡å®šåº“åŒºçš„åº“ä½"
    ) Integer locationId,

    @McpToolParam(
        name = "code",
        description = "åº“ä½ç¼–ç ï¼ˆå¯é€‰ï¼‰ï¼Œæ”¯æŒæ¨¡ç³ŠåŒ¹é…"
    ) String code,

    @McpToolParam(
        name = "name",
        description = "åº“ä½åç§°ï¼ˆå¯é€‰ï¼‰ï¼Œæ”¯æŒæ¨¡ç³ŠåŒ¹é…"
    ) String name,

    @McpToolParam(
        name = "status",
        description = "åº“ä½çŠ¶æ€ï¼ˆå¯é€‰ï¼‰ï¼Œ'0'=ç©ºé—²ï¼Œ'1'=å·²åˆ†é…ï¼Œ'2'=å·²å ç”¨"
    ) String status,

    @McpToolParam(
        name = "goodsStatus",
        description = "è´§å“çŠ¶æ€ï¼ˆå¯é€‰ï¼‰ï¼Œ'0'=æ­£å¸¸å“ï¼Œ'1'=æ¬¡å“"
    ) String goodsStatus,

    @McpToolParam(
        name = "enable",
        description = "å¯ç”¨çŠ¶æ€ï¼ˆå¯é€‰ï¼‰ï¼Œtrue=å¯ç”¨ï¼Œfalse=åœç”¨"
    ) Boolean enable,

    @McpToolParam(
        name = "isDefault",
        description = "æ˜¯å¦é»˜è®¤åº“ä½ï¼ˆå¯é€‰ï¼‰ï¼Œtrue=é»˜è®¤ï¼Œfalse=éé»˜è®¤"
    ) Boolean isDefault
) {
    return binAiService.queryBins(
        warehouseId, locationId, code, name,
        status, goodsStatus, enable, isDefault
    );
}
```

**å·¥å…·2: get_bin_detail**
```java
@McpTool(
    name = "get_bin_detail",
    description = "è·å–åº“ä½è¯¦ç»†ä¿¡æ¯ï¼ŒåŒ…æ‹¬åŸºæœ¬ä¿¡æ¯ã€è´§å“ä¿¡æ¯å’Œåº“å­˜æ•°æ®ã€‚"
)
public Map<String, Object> getBinDetail(
    @McpToolParam(
        name = "binId",
        description = "åº“ä½IDï¼ˆå¿…å¡«ï¼‰",
        required = true
    ) Integer binId
) {
    return binAiService.getBinDetail(binId);
}
```

**å·¥å…·3: query_bins_by_location**
```java
@McpTool(
    name = "query_bins_by_location",
    description = "æŸ¥è¯¢æŒ‡å®šåº“åŒºä¸‹çš„æ‰€æœ‰åº“ä½ã€‚ç”¨äºæŸ¥çœ‹æŸä¸ªåº“åŒºçš„åº“ä½å¸ƒå±€ã€‚"
)
public Map<String, Object> queryBinsByLocation(
    @McpToolParam(
        name = "locationId",
        description = "åº“åŒºIDï¼ˆå¿…å¡«ï¼‰",
        required = true
    ) Integer locationId
) {
    return binAiService.queryBinsByLocation(locationId);
}
```

**å·¥å…·4: query_bins_by_warehouse**
```java
@McpTool(
    name = "query_bins_by_warehouse",
    description = "æŸ¥è¯¢æŒ‡å®šä»“åº“ä¸‹çš„æ‰€æœ‰åº“ä½ã€‚ç”¨äºæŸ¥çœ‹æŸä¸ªä»“åº“çš„å…¨éƒ¨åº“ä½ã€‚"
)
public Map<String, Object> queryBinsByWarehouse(
    @McpToolParam(
        name = "warehouseId",
        description = "ä»“åº“IDï¼ˆå¿…å¡«ï¼‰",
        required = true
    ) Integer warehouseId
) {
    return binAiService.queryBinsByWarehouse(warehouseId);
}
```

**å·¥å…·5: find_bin_by_code**
```java
@McpTool(
    name = "find_bin_by_code",
    description = "æŒ‰åº“ä½ç¼–ç ç²¾ç¡®æŸ¥æ‰¾åº“ä½ã€‚ç”¨äºå¿«é€Ÿå®šä½ç‰¹å®šåº“ä½ã€‚"
)
public Map<String, Object> findBinByCode(
    @McpToolParam(
        name = "code",
        description = "åº“ä½ç¼–ç ï¼ˆå¿…å¡«ï¼‰ï¼Œç²¾ç¡®åŒ¹é…",
        required = true
    ) String code
) {
    return binAiService.findBinByCode(code);
}
```

**å·¥å…·6: get_available_bins**
```java
@McpTool(
    name = "get_available_bins",
    description = "è·å–å¯ç”¨åº“ä½åˆ—è¡¨ï¼ˆç©ºé—²ä¸”å¯ç”¨çš„åº“ä½ï¼‰ã€‚ç”¨äºå…¥åº“æ—¶æŸ¥æ‰¾å¯ç”¨åº“ä½ã€‚"
)
public Map<String, Object> getAvailableBins(
    @McpToolParam(
        name = "warehouseId",
        description = "ä»“åº“IDï¼ˆå¯é€‰ï¼‰ï¼Œä¸æŒ‡å®šåˆ™æŸ¥è¯¢æ‰€æœ‰ä»“åº“"
    ) Integer warehouseId,

    @McpToolParam(
        name = "locationId",
        description = "åº“åŒºIDï¼ˆå¯é€‰ï¼‰ï¼Œä¸æŒ‡å®šåˆ™æŸ¥è¯¢æ‰€æœ‰åº“åŒº"
    ) Integer locationId
) {
    return binAiService.getAvailableBins(warehouseId, locationId);
}
```

---

## 7. æ•°æ®æµç¨‹

### 7.1 æ ‡å‡†æŸ¥è¯¢æµç¨‹

```
ç”¨æˆ·è¯·æ±‚
   â†“
AI å·¥ä½œæµè§£ææ„å›¾
   â†“
è°ƒç”¨ MCP Tool (å¦‚: query_warehouses)
   â†“
WarehouseMcpTools.queryWarehouses()
   â†“
WarehouseAiService.queryWarehouses()
   â”œâ”€ å‚æ•°æ ¡éªŒ
   â”œâ”€ æ„å»ºæŸ¥è¯¢æ¡ä»¶ MWarehouseVo
   â”œâ”€ è°ƒç”¨ IMWarehouseService.selectList()
   â”œâ”€ ç»“æœå¤„ç†
   â”‚  â”œâ”€ è®¡ç®—ç»Ÿè®¡æ‘˜è¦ (æ€»æ•°ã€å¯ç”¨æ•°ã€å®¹é‡ç­‰)
   â”‚  â”œâ”€ æ„å»ºè¿”å› Map
   â”‚  â””â”€ åŒ…è£…æˆåŠŸå“åº”
   â””â”€ å¼‚å¸¸å¤„ç† (è¿”å›é”™è¯¯å“åº”)
   â†“
è¿”å›ç»™ AI å·¥ä½œæµ
   â†“
AI ç”Ÿæˆè‡ªç„¶è¯­è¨€å›ç­”
   â†“
è¿”å›ç»™ç”¨æˆ·
```

### 7.2 è¯¦æƒ…æŸ¥è¯¢æµç¨‹

```
ç”¨æˆ·è¯·æ±‚: "WH001ä»“åº“çš„è¯¦ç»†ä¿¡æ¯"
   â†“
AI è§£æ: éœ€è¦è°ƒç”¨ get_warehouse_detail(warehouseId=1)
   â†“
WarehouseMcpTools.getWarehouseDetail(1)
   â†“
WarehouseAiService.getWarehouseDetail(1)
   â”œâ”€ è°ƒç”¨ IMWarehouseService.selectById(1)
   â”œâ”€ è°ƒç”¨ IMLocationService.selectList(warehouse_id=1) ç»Ÿè®¡åº“åŒºæ•°
   â”œâ”€ è°ƒç”¨ IMBinService.selectList(warehouse_id=1) ç»Ÿè®¡åº“ä½æ•°
   â”œâ”€ è®¡ç®—åº“ä½åˆ©ç”¨ç‡
   â””â”€ æ„å»ºåŒ…å« warehouse + related_info çš„å“åº”
   â†“
è¿”å›ç»™ AI: {warehouse: {...}, related_info: {...}}
   â†“
AI ç”Ÿæˆå›ç­”: "WH001ä¸Šæµ·æ€»ä»“ï¼Œå…±æœ‰12ä¸ªåº“åŒºï¼Œ360ä¸ªåº“ä½ï¼Œå½“å‰åˆ©ç”¨ç‡75.5%..."
   â†“
è¿”å›ç»™ç”¨æˆ·
```

### 7.3 å±‚çº§æŸ¥è¯¢æµç¨‹

```
ç”¨æˆ·: "ä¸Šæµ·ä»“åº“æœ‰å“ªäº›å¯ç”¨åº“ä½ï¼Ÿ"
   â†“
AI æ¨ç†:
   1. å…ˆæŸ¥ä»“åº“: query_warehouses(province="ä¸Šæµ·å¸‚") â†’ æ‰¾åˆ° WH001
   2. å†æŸ¥åº“ä½: get_available_bins(warehouseId=1)
   â†“
è¿”å›ç»“æœ: "ä¸Šæµ·æ€»ä»“(WH001)å½“å‰æœ‰80ä¸ªå¯ç”¨åº“ä½..."
```

---

## 8. é…ç½®ä¿®æ”¹

### 8.1 application.yml é…ç½®

åœ¨ `scm-start/src/main/resources/application.yml` ä¸­æ·»åŠ  Spring AI MCP é…ç½®ï¼š

```yaml
spring:
  ai:
    mcp:
      # MCP æœåŠ¡å™¨é…ç½®
      server:
        # å¯ç”¨ MCP æœåŠ¡å™¨
        enabled: true
        # æœåŠ¡å™¨ç«¯å£ï¼ˆé»˜è®¤ä½¿ç”¨åº”ç”¨ç«¯å£ï¼‰
        port: ${server.port}

      # MCP å·¥å…·åŒ…æ‰«æè·¯å¾„
      tool-packages:
        - com.xinyirun.scm.ai.mcp.P00000025.tools

      # MCP å·¥å…·é…ç½®
      tools:
        # ä»“åº“ç®¡ç†å·¥å…·
        warehouse:
          enabled: true
          description: "ä»“åº“ä¸»æ•°æ®æŸ¥è¯¢å·¥å…·ï¼Œæä¾›ä»“åº“ã€åº“åŒºã€åº“ä½ä¸‰å±‚æ•°æ®æŸ¥è¯¢"
          version: "1.0.0"
```

### 8.2 é…ç½®è¯´æ˜

| é…ç½®é¡¹ | ä½œç”¨ | å€¼ |
|-------|------|---|
| `spring.ai.mcp.server.enabled` | å¯ç”¨MCPæœåŠ¡å™¨ | true |
| `spring.ai.mcp.tool-packages` | MCPå·¥å…·æ‰«æåŒ…è·¯å¾„ | com.xinyirun.scm.ai.mcp.P00000025.tools |
| `spring.ai.mcp.tools.warehouse.enabled` | å¯ç”¨ä»“åº“ç®¡ç†å·¥å…· | true |

---

## 9. é£é™©åˆ†æ

### 9.1 æŠ€æœ¯é£é™©

| é£é™© | ç­‰çº§ | å½±å“ | ç¼“è§£æªæ–½ |
|-----|------|------|----------|
| Spring AI MCP ç‰ˆæœ¬å…¼å®¹æ€§ | ğŸŸ¡ ä¸­ | å·¥å…·å¯èƒ½æ— æ³•æ³¨å†Œ | ä½¿ç”¨é¡¹ç›®å½“å‰ Spring AI ç‰ˆæœ¬ï¼Œå‚è€ƒç°æœ‰å®ç° |
| æŸ¥è¯¢æ€§èƒ½é—®é¢˜ | ğŸŸ¡ ä¸­ | å¤§é‡æ•°æ®æ—¶å“åº”æ…¢ | å¤ç”¨ scm-core å·²ä¼˜åŒ–çš„æŸ¥è¯¢ï¼Œå¿…è¦æ—¶æ·»åŠ åˆ†é¡µ |
| å†…å­˜å ç”¨ | ğŸŸ¢ ä½ | ç»Ÿè®¡è®¡ç®—å ç”¨å†…å­˜ | ç»Ÿè®¡ä»…åœ¨ç»“æœé›†ä¸Šè®¡ç®—ï¼Œä¸åŠ è½½é¢å¤–æ•°æ® |
| å¼‚å¸¸å¤„ç†ä¸å®Œå–„ | ğŸŸ¢ ä½ | è¿”å›é”™è¯¯ä¿¡æ¯ä¸å‹å¥½ | ç»Ÿä¸€ try-catchï¼Œè¿”å›æ ‡å‡†é”™è¯¯æ ¼å¼ |

### 9.2 ä¸šåŠ¡é£é™©

| é£é™© | ç­‰çº§ | å½±å“ | ç¼“è§£æªæ–½ |
|-----|------|------|----------|
| æ•°æ®æƒé™é—®é¢˜ | ğŸŸ¢ ä½ | è·¨ç§Ÿæˆ·æ•°æ®æ³„éœ² | ä¾èµ– scm-core çš„ç§Ÿæˆ·éš”ç¦»æœºåˆ¶ |
| æ•°æ®ä¸€è‡´æ€§ | ğŸŸ¢ ä½ | æŸ¥è¯¢æ—¶æ•°æ®è¢«ä¿®æ”¹ | åªè¯»æ“ä½œï¼Œä¸å½±å“ä¸€è‡´æ€§ |
| æŸ¥è¯¢æ¡ä»¶è¯¯ç”¨ | ğŸŸ¢ ä½ | è¿”å›é”™è¯¯æ•°æ® | å‚æ•°æ ¡éªŒï¼Œæä¾›æ¸…æ™°çš„å‚æ•°è¯´æ˜ |

### 9.3 è¿ç»´é£é™©

| é£é™© | ç­‰çº§ | å½±å“ | ç¼“è§£æªæ–½ |
|-----|------|------|----------|
| æ—¥å¿—ä¸è¶³ | ğŸŸ¢ ä½ | é—®é¢˜æ’æŸ¥å›°éš¾ | æ¯ä¸ªæ–¹æ³•æ·»åŠ  INFO çº§æ—¥å¿— |
| ç›‘æ§ç¼ºå¤± | ğŸŸ¢ ä½ | æ— æ³•è¿½è¸ªè°ƒç”¨æƒ…å†µ | å¤ç”¨ç°æœ‰ Spring Actuator ç›‘æ§ |
| é…ç½®é”™è¯¯ | ğŸŸ¢ ä½ | MCPå·¥å…·æ— æ³•ä½¿ç”¨ | æä¾›é…ç½®æ£€æŸ¥æ¸…å• |

### 9.4 æ•´ä½“é£é™©è¯„ä¼°

- **æ€»ä½“é£é™©ç­‰çº§**: ğŸŸ¢ ä½é£é™©
- **å¯æ§æ€§**: âœ… é«˜åº¦å¯æ§
- **ç†ç”±**:
  1. åªåšæŸ¥è¯¢æ“ä½œï¼Œä¸æ¶‰åŠæ•°æ®ä¿®æ”¹
  2. å¤ç”¨æˆç†Ÿçš„ scm-core æœåŠ¡
  3. éµå¾ªç°æœ‰ BinAiService/LocationAiService æ¨¡å¼
  4. æ–°å¢æ¨¡å—ï¼Œä¸å½±å“ç°æœ‰åŠŸèƒ½

---

## 10. å®æ–½è®¡åˆ’

### 10.1 å¼€å‘é˜¶æ®µ

| é˜¶æ®µ | ä»»åŠ¡ | é¢„ä¼°å·¥æ—¶ | äº§å‡º |
|-----|------|----------|------|
| **é˜¶æ®µ1** | åˆ›å»º WarehouseAiService | 4h | å®Œæ•´çš„ä¸šåŠ¡é€»è¾‘åŒ…è£… |
| **é˜¶æ®µ2** | åˆ›å»º WarehouseMcpTools | 2h | MCP å·¥å…·å®šä¹‰ |
| **é˜¶æ®µ3** | åˆ›å»º LocationMcpTools | 1h | MCP å·¥å…·å®šä¹‰ï¼ˆå‚è€ƒå·²æœ‰ï¼‰ |
| **é˜¶æ®µ4** | åˆ›å»º BinMcpTools | 1h | MCP å·¥å…·å®šä¹‰ï¼ˆå‚è€ƒå·²æœ‰ï¼‰ |
| **é˜¶æ®µ5** | é…ç½®ä¿®æ”¹ | 0.5h | application.yml é…ç½® |
| **é˜¶æ®µ6** | å•å…ƒæµ‹è¯•ï¼ˆå¯é€‰ï¼‰ | 2h | æµ‹è¯•ç”¨ä¾‹ |
| **æ€»è®¡** | | 10.5h | å®Œæ•´MCPæœåŠ¡ |

### 10.2 æµ‹è¯•é˜¶æ®µ

| æµ‹è¯•ç±»å‹ | æµ‹è¯•å†…å®¹ | é€šè¿‡æ ‡å‡† |
|---------|---------|---------|
| **åŠŸèƒ½æµ‹è¯•** | æ‰€æœ‰ MCP å·¥å…·å¯æ­£å¸¸è°ƒç”¨ | 100% å·¥å…·å¯ç”¨ |
| **æ•°æ®æ­£ç¡®æ€§** | è¿”å›æ•°æ®ä¸æ•°æ®åº“ä¸€è‡´ | 100% æ•°æ®å‡†ç¡® |
| **å¼‚å¸¸å¤„ç†** | é”™è¯¯åœºæ™¯è¿”å›å‹å¥½é”™è¯¯ä¿¡æ¯ | æ‰€æœ‰å¼‚å¸¸è¢«æ•è· |
| **æ€§èƒ½æµ‹è¯•** | æŸ¥è¯¢å“åº”æ—¶é—´ < 2ç§’ | 95% è¯·æ±‚è¾¾æ ‡ |
| **é›†æˆæµ‹è¯•** | AI å·¥ä½œæµå¯æ­£å¸¸ä½¿ç”¨å·¥å…· | ç«¯åˆ°ç«¯æµç¨‹é€šç•… |

### 10.3 éªŒæ”¶æ ‡å‡†

âœ… **å¿…é¡»æ»¡è¶³**:
1. æ‰€æœ‰ MCP å·¥å…·å¯é€šè¿‡ Spring AI è°ƒç”¨
2. è¿”å›æ•°æ®æ ¼å¼ç¬¦åˆè®¾è®¡è§„èŒƒï¼ˆMap<String, Object>ï¼‰
3. é”™è¯¯å¤„ç†å®Œå–„ï¼Œæ— æœªæ•è·å¼‚å¸¸
4. æ—¥å¿—è®°å½•å®Œæ•´ï¼Œä¾¿äºé—®é¢˜æ’æŸ¥
5. ä»£ç é£æ ¼ç¬¦åˆé¡¹ç›®è§„èŒƒ

âœ… **å»ºè®®æ»¡è¶³**:
1. æä¾›å•å…ƒæµ‹è¯•ç”¨ä¾‹
2. æŸ¥è¯¢æ€§èƒ½æ»¡è¶³ä¸šåŠ¡éœ€æ±‚ï¼ˆ<2ç§’ï¼‰
3. æ–‡æ¡£å®Œå–„ï¼ŒåŒ…å«ä½¿ç”¨ç¤ºä¾‹

---

## 11. é™„å½•

### 11.1 æ•°æ®åº“è¡¨ç»“æ„å‚è€ƒ

**m_warehouse è¡¨ï¼ˆ38å­—æ®µï¼‰**:
- **ä¸»é”®**: id (int)
- **æ ¸å¿ƒå­—æ®µ**: code, name, short_name, province, city, address
- **åŠŸèƒ½å­—æ®µ**: enable, warehouse_type, enable_location, enable_bin
- **å®¹é‡å­—æ®µ**: warehouse_capacity, area
- **å®¡è®¡å­—æ®µ**: c_time, c_id, u_time, u_id, deleted, dbversion

**m_location è¡¨ï¼ˆ20å­—æ®µï¼‰**:
- **ä¸»é”®**: id (int)
- **æ ¸å¿ƒå­—æ®µ**: code, name, warehouse_id (FK)
- **åŠŸèƒ½å­—æ®µ**: enable, is_default, inventory (é”å®šçŠ¶æ€)
- **å®¡è®¡å­—æ®µ**: c_time, c_id, u_time, u_id, deleted, dbversion

**m_bin è¡¨ï¼ˆ28å­—æ®µï¼‰**:
- **ä¸»é”®**: id (int)
- **æ ¸å¿ƒå­—æ®µ**: code, name, warehouse_id, location_id
- **çŠ¶æ€å­—æ®µ**: goods_status (0=ç©º, 1=åˆ†é…, 2=å ç”¨), enable
- **ä½ç½®å­—æ®µ**: line_code, col_code, row_code, level_code
- **åŠŸèƒ½å­—æ®µ**: is_default, inventory
- **å®¡è®¡å­—æ®µ**: c_time, c_id, u_time, u_id, deleted, dbversion

### 11.2 å‚è€ƒæ–‡æ¡£

- Spring AI MCP å®˜æ–¹æ–‡æ¡£
- scm-core æœåŠ¡æ¥å£æ–‡æ¡£
- BinAiService å®ç°å‚è€ƒ: `P00000025/service/BinAiService.java`
- LocationAiService å®ç°å‚è€ƒ: `P00000025/service/LocationAiService.java`

### 11.3 ä»£ç è§„èŒƒ

- éµå¾ªé˜¿é‡Œå·´å·´ Java å¼€å‘æ‰‹å†Œ
- æ—¥å¿—çº§åˆ«: INFOï¼ˆæ­£å¸¸æµç¨‹ï¼‰ã€ERRORï¼ˆå¼‚å¸¸æƒ…å†µï¼‰
- æ³¨é‡Š: ç±»æ³¨é‡Šã€æ–¹æ³•æ³¨é‡Šã€å…³é”®é€»è¾‘æ³¨é‡Š
- å‘½å: é©¼å³°å‘½åæ³•ï¼Œè§åçŸ¥æ„

---

## 12. å®¡æ‰¹è®°å½•

| å®¡æ‰¹äºº | è§’è‰² | å®¡æ‰¹ç»“æœ | å®¡æ‰¹æ—¶é—´ | å¤‡æ³¨ |
|-------|------|---------|---------|------|
| **å¾…å®¡æ‰¹** | é¡¹ç›®è´Ÿè´£äºº | - | - | ç­‰å¾…æ–¹æ¡ˆå®¡æ‰¹ |

---

## 13. å˜æ›´è®°å½•

| ç‰ˆæœ¬ | æ—¥æœŸ | å˜æ›´å†…å®¹ | å˜æ›´äºº |
|-----|------|---------|--------|
| v1.0 | 2025-11-04 | åˆç¨¿å®Œæˆ | zzxxhh |

---

**æ–‡æ¡£ç»“æŸ**
