-- ================================================================
-- AI工作流智能路由 - 字典数据初始化脚本
-- ================================================================
-- 功能: 初始化ai_workflow_category字典数据
-- 创建时间: 2025-11-10 09:55:57
-- 设计文档: docs/design/2025-11-10-AI工作流智能路由-方案.md
-- ================================================================

USE scm_tenant_20250519_001;

-- ================================================================
-- 1. 插入字典类型: ai_workflow_category
-- ================================================================

INSERT INTO s_dict_type (code, name, descr, c_id, c_time, u_id, u_time, is_del, dbversion)
VALUES (
    'ai_workflow_category',
    'AI工作流分类',
    '用于前端列表页筛选和UI展示的工作流分类,仅用于UI组织,不参与路由逻辑',
    1,
    NOW(),
    1,
    NOW(),
    0,
    0
);

-- ================================================================
-- 2. 插入字典数据项
-- ================================================================

-- 获取dict_type的id
SET @dict_type_id = (SELECT id FROM s_dict_type WHERE code = 'ai_workflow_category');

-- 插入3个分类选项
INSERT INTO s_dict_data (code, dict_type_id, label, dict_value, sort, extra1, descr, c_id, c_time, u_id, u_time, is_del, dbversion)
VALUES
-- 0: 业务处理(默认)
-- extra1='1' 标记为默认值
('ai_workflow_category', @dict_type_id, '业务处理', '0', 1, '1', 'SCM订单、采购、库存等核心业务处理', 1, NOW(), 1, NOW(), 0, 0),

-- 1: 知识问答
('ai_workflow_category', @dict_type_id, '知识问答', '1', 2, '0', '基于知识库的文档检索和专业知识问答', 1, NOW(), 1, NOW(), 0, 0),

-- 2: 通用对话
('ai_workflow_category', @dict_type_id, '通用对话', '2', 3, '0', '一般性对话、闲聊、兜底分类', 1, NOW(), 1, NOW(), 0, 0);

-- ================================================================
-- 执行完成
-- ================================================================
-- 字段说明:
-- - dict_value: '0'/'1'/'2' (实际存储在 ai_workflow.category 的值)
-- - label: 前端显示的中文标签
-- - sort: 排序(1最前)
-- - extra1='1': 标记 '0'(业务处理) 为默认值
-- ================================================================
